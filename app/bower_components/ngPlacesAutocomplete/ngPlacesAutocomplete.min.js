"use strict";angular.module("ngPlacesAutocomplete",[]).directive("ngPlacesAutocomplete",function(){var e="[ngPlacesAutocomplete] - ",n={bounds:"setBounds",types:"setTypes",componentRestrictions:"setComponentRestrictions"},a={bounds:null,types:[],componentRestrictions:null,bindTo:null,updateModel:!1,watchOptions:!1,preventSubmit:!0};return{restrict:"A",require:"ngModel",scope:{paOnPlaceReady:"=",paOptions:"=?",paTrigger:"=?"},link:function(t,o,l,p){function s(){c&&(t.paOptions=angular.extend(angular.copy(a),t.paOptions),angular.forEach(n,function(e,n){var a=t.paOptions[n]||void 0;c[e](a)}),t.paOptions.preventSubmit&&o.on("keydown",function(e){13==e.keyCode&&e.preventDefault()}))}if(!angular.isFunction(t.paOnPlaceReady))throw new Error(e+"paOnPlaceReady needs to be a function!");if(!google.maps||!google.maps.places)throw new Error(e+"Google Places Service not found!");var c=new google.maps.places.Autocomplete(o[0],{}),i=new google.maps.places.AutocompleteService,r=angular.element("<div>")[0],u=new google.maps.places.PlacesService(r);google.maps.event.addListener(c,"place_changed",function(){o[0].blur();var e=c.getPlace();e.address_components?t.$apply(function(){t.paOptions.updateModel&&p.$setViewValue(e.formatted_address),t.paOnPlaceReady(null,e)}):d()});var d=function(){o[0].blur(),p.$viewValue||t.paOnPlaceReady(null);var e=angular.extend({input:p.$viewValue},t.paOptions);i.getPlacePredictions(e,function(e){return e&&0!==e.length?void g(e[0].place_id):t.$apply(function(){t.paOnPlaceReady(null)})})},g=function(n){u.getDetails({placeId:n},function(n,a){t.$apply(a===google.maps.places.PlacesServiceStatus.OK||a===google.maps.places.PlacesServiceStatus.ZERO_RESULTS?function(){t.paOptions.updateModel&&(p.$setViewValue(n.formatted_address),p.$render()),t.paOnPlaceReady(null,n)}:function(){t.paOnPlaceReady(new Error(e+'Places returned status: "'+a+'"'))})})};t.paTrigger&&(t.paTrigger=d),angular.isObject(t.paOptions)&&t.paOptions.watchOptions?t.$watch("paOptions",function(){s()},!0):s()}}});